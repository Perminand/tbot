# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Pull Request

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤–æ –∫ —Å–æ–∑–¥–∞–Ω–∏—é PR

–í–µ—Ç–∫–∞ `cursor/check-bid-ask-prices-for-losses-c24b` —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

## üîó –°–æ–∑–¥–∞–Ω–∏–µ Pull Request

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π Git:
```
https://github.com/Perminand/tbot/pull/new/cursor/check-bid-ask-prices-for-losses-c24b
```

### –†—É—á–Ω–æ–π —Å–ø–æ—Å–æ–±:
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://github.com/Perminand/tbot
2. –ù–∞–∂–º–∏—Ç–µ "Compare & pull request" –¥–ª—è –≤–µ—Ç–∫–∏ `cursor/check-bid-ask-prices-for-losses-c24b`
3. –ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Pull requests" ‚Üí "New pull request"

## üìù –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ PR:

### –ó–∞–≥–æ–ª–æ–≤–æ–∫:
```
üöÄ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bid/ask —Ü–µ–Ω
```

### –û–ø–∏—Å–∞–Ω–∏–µ:
```markdown
## üîç –ü—Ä–æ–±–ª–µ–º–∞
–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–º–µ—â–∞–ª–∞ –æ—Ä–¥–µ—Ä–∞ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–±—ã—Ç–∫–∞–º:
- –ü–æ–∫—É–ø–∫–∞ –ø–æ —Ü–µ–Ω–∞–º –Ω–∏–∂–µ bid (–ø–ª–æ—Ö–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ)
- –ü—Ä–æ–¥–∞–∂–∞ –ø–æ —Ü–µ–Ω–∞–º –≤—ã—à–µ ask (–ø–ª–æ—Ö–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã (bid+ask)/2 –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–æ—Ç–∏—Ä–æ–≤–æ–∫

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤:
- **–ü–æ–∫—É–ø–∫–∞**: ask —Ü–µ–Ω–∞ + –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø –í–í–ï–†–• (0.02%-0.1%)
- **–ü—Ä–æ–¥–∞–∂–∞**: bid —Ü–µ–Ω–∞ - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø –í–ù–ò–ó (0.02%-0.1%)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä**: —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä –ø—Ä–∏ –º–∞–ª–æ–º —Å–ø—Ä—ç–¥–µ (<0.1%), –ª–∏–º–∏—Ç–Ω—ã–π –ø—Ä–∏ –±–æ–ª—å—à–æ–º

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- `MarketAnalysisService`: –¥–æ–±–∞–≤–ª–µ–Ω `getBidAskPrices()` –∏ –∫–ª–∞—Å—Å `BidAskPrices`
- `OrderService`: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω `placeSmartLimitOrder()`, –¥–æ–±–∞–≤–ª–µ–Ω `placeOptimalOrder()`
- `TradingService`: –æ–±–Ω–æ–≤–ª–µ–Ω—ã `placeMarketBuyOrder()` –∏ `placeMarketSellOrder()`
- –£–º–µ–Ω—å—à–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã —Å 0.05%-0.3% –¥–æ 0.02%-0.1%

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É–±—ã—Ç–∫–æ–≤ –æ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –õ—É—á—à–µ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ –±–ª–∏–∑–∫–æ –∫ —Ä—ã–Ω–æ—á–Ω—ã–º —Ü–µ–Ω–∞–º
- ‚úÖ –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è –∏ –ø–æ—Ç–µ—Ä—å –Ω–∞ —Å–ø—Ä—ç–¥–µ
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏

## üìä –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/main/java/ru/perminov/service/MarketAnalysisService.java` (+55 —Å—Ç—Ä–æ–∫)
- `src/main/java/ru/perminov/service/OrderService.java` (+108 —Å—Ç—Ä–æ–∫)
- `src/main/java/ru/perminov/service/TradingService.java` (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
- `BID_ASK_FIX_GUIDE.md` (–Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π)

## ‚ö†Ô∏è –í–∞–∂–Ω–æ—Å—Ç—å
–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã.
```

## üè∑Ô∏è –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–µ–≥–∏/–ª–µ–π–±–ª—ã:
- `critical`
- `bug-fix`
- `trading-logic`
- `bid-ask-fix`
- `performance-improvement`

## üë• –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ–≤—å—é–µ—Ä—ã:
–ù–∞–∑–Ω–∞—á—å—Ç–µ –æ–ø—ã—Ç–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∑–Ω–∞–∫–æ–º—ã—Ö —Å —Ç–æ—Ä–≥–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π.

## ‚úÖ Checklist –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º:
- [ ] –ö–æ–¥-—Ä–µ–≤—å—é –ø—Ä–æ–π–¥–µ–Ω–æ
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ ‚úÖ
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ ‚úÖ
- [ ] –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ ‚úÖ

---
**–°–æ–∑–¥–∞–Ω–æ**: $(date)
**–í–µ—Ç–∫–∞**: `cursor/check-bid-ask-prices-for-losses-c24b`
**–°—Ç–∞—Ç—É—Å**: üü¢ –ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–≤—å—é