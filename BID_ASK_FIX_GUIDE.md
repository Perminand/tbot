# üöÄ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Bid/Ask —Ü–µ–Ω–∞–º–∏

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–º–µ—â–∞–ª–∞ –æ—Ä–¥–µ—Ä–∞ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —É–±—ã—Ç–æ—á–Ω—ã–º —Å–¥–µ–ª–∫–∞–º:

### ‚ùå **–°—Ç–∞—Ä–∞—è (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è) –ª–æ–≥–∏–∫–∞:**
1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω—ã**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ `(bid + ask) / 2`
2. **–ü–æ–∫—É–ø–∫–∞**: –†–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–∏–º–∏—Ç–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞ **–ù–ò–ñ–ï** —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã (-0.05% –¥–æ -0.3%)
3. **–ü—Ä–æ–¥–∞–∂–∞**: –†–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–∏–º–∏—Ç–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞ **–í–´–®–ï** —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã (+0.04% –¥–æ +0.16%)

### üí• **–†–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ç–∞—Ä–æ–π –ª–æ–≥–∏–∫–∏:**
- –ü–æ–∫—É–ø–∫–∞ –ø–æ —Ü–µ–Ω–µ –Ω–∏–∂–µ bid ‚Üí –ø–ª–æ—Ö–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ –Ω–µ–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
- –ü—Ä–æ–¥–∞–∂–∞ –ø–æ —Ü–µ–Ω–µ –≤—ã—à–µ ask ‚Üí –ø–ª–æ—Ö–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ –Ω–µ–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
- –£–±—ã—Ç–æ—á–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –∏–∑-–∑–∞ –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è

## ‚úÖ **–ù–æ–≤–∞—è (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è) –ª–æ–≥–∏–∫–∞:**

### 1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö bid/ask —Ü–µ–Ω**
```java
MarketAnalysisService.BidAskPrices bidAsk = marketAnalysisService.getBidAskPrices(figi);
```

### 2. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤:**
- **–ü–æ–∫—É–ø–∫–∞**: `ask —Ü–µ–Ω–∞ + –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø –í–í–ï–†–•` (0.02%-0.1%)
- **–ü—Ä–æ–¥–∞–∂–∞**: `bid —Ü–µ–Ω–∞ - –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø –í–ù–ò–ó` (0.02%-0.1%)

### 3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**
- –°–ø—Ä—ç–¥ < 0.1% ‚Üí –†—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä
- –°–ø—Ä—ç–¥ ‚â• 0.1% ‚Üí –£–º–Ω—ã–π –ª–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä

## üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. **MarketAnalysisService.java**
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getBidAskPrices(String figi)`
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å `BidAskPrices` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è bid/ask –¥–∞–Ω–Ω—ã—Ö
- üìä –†–∞—Å—á–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–ø—Ä—ç–¥–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö

### 2. **OrderService.java**
- üîÑ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `placeSmartLimitOrder()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö bid/ask —Ü–µ–Ω
- üìâ –£–º–µ–Ω—å—à–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã: 0.02%-0.1% –≤–º–µ—Å—Ç–æ 0.05%-0.3%
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `placeOptimalOrder()` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- üí° –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º bid/ask/spread

### 3. **TradingService.java**
- üîÑ –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `placeMarketBuyOrder()` –∏ `placeMarketSellOrder()`
- üéØ –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `placeOptimalOrder()` –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–æ–π –ª–æ–≥–∏–∫–∏

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. **–õ—É—á—à–µ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤:**
- –ü–æ–∫—É–ø–∫–∞ –ø–æ —Ü–µ–Ω–∞–º –±–ª–∏–∑–∫–∏–º –∫ ask
- –ü—Ä–æ–¥–∞–∂–∞ –ø–æ —Ü–µ–Ω–∞–º –±–ª–∏–∑–∫–∏–º –∫ bid
- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è

### 2. **–°–Ω–∏–∂–µ–Ω–∏–µ —É–±—ã—Ç–∫–æ–≤:**
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ç–µ—Ä—å –æ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- –£—á–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–ø—Ä—ç–¥–∞ –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –æ—Ä–¥–µ—Ä–æ–≤

### 3. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–µ–∂–¥—É —Ä—ã–Ω–æ—á–Ω—ã–º –∏ –ª–∏–º–∏—Ç–Ω—ã–º –æ—Ä–¥–µ—Ä–æ–º
- –†–∞–∑–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (–≥–æ–ª—É–±—ã–µ —Ñ–∏—à–∫–∏, ETF, –æ–±—ã—á–Ω—ã–µ –∞–∫—Ü–∏–∏)

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

```
üìà –ü–û–ö–£–ü–ö–ê [–ò–°–ü–†–ê–í–õ–ï–ù–û]: ask=150.25 ‚Üí –ª–∏–º–∏—Ç=150.28 (–æ—Ç—Å—Ç—É–ø +0.02%)
üìâ –ü–†–û–î–ê–ñ–ê [–ò–°–ü–†–ê–í–õ–ï–ù–û]: bid=150.20 ‚Üí –ª–∏–º–∏—Ç=150.17 (–æ—Ç—Å—Ç—É–ø -0.02%)
üí° –°–ø—Ä—ç–¥ –¥–ª—è BBG004730N88: 0.03% (bid=150.20, ask=150.25, mid=150.225)
üöÄ –û–ü–¢–ò–ú–ê–õ–¨–ù–´–ô –í–´–ë–û–† –¥–ª—è BBG004730N88: –†–´–ù–û–ß–ù–´–ô –æ—Ä–¥–µ—Ä (—Å–ø—Ä—ç–¥ 0.03% < 0.1%)
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

1. **Fallback –ª–æ–≥–∏–∫–∞**: –ï—Å–ª–∏ –Ω–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å bid/ask, —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É —Å —É–º–µ–Ω—å—à–µ–Ω–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏
2. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã**: –ù–æ–≤—ã–µ –æ—Ç—Å—Ç—É–ø—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—å—à–µ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–µ—Ä—å –Ω–∞ —Å–ø—Ä—ç–¥–µ
3. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: $(date)
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é