# üè≠ –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞–º–∏ –∏ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞–º–∏ (`SectorManagementService`) –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ—Ä—Ç—Ñ–µ–ª—è –ø–æ –æ—Ç—Ä–∞—Å–ª—è–º —ç–∫–æ–Ω–æ–º–∏–∫–∏ —Å —É—á–µ—Ç–æ–º —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Ä–µ–∞–ª–∏–π –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–ª—è –Ω–µ–∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–æ–π
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–∫—É–ø–æ–∫ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

### 2. **–†–æ—Å—Å–∏–π—Å–∫–∏–µ —Å–µ–∫—Ç–æ—Ä—ã —ç–∫–æ–Ω–æ–º–∏–∫–∏**
- **–ë–∞–Ω–∫–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã** (HIGH —Ä–∏—Å–∫) - –°–±–µ—Ä–±–∞–Ω–∫, –í–¢–ë, –¢–∏–Ω—å–∫–æ—Ñ—Ñ
- **–ù–µ—Ñ—Ç—å –∏ –≥–∞–∑** (MEDIUM —Ä–∏—Å–∫) - –ì–∞–∑–ø—Ä–æ–º, –õ—É–∫–æ–π–ª, –†–æ—Å–Ω–µ—Ñ—Ç—å
- **–ú–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è** (HIGH —Ä–∏—Å–∫) - –ù–õ–ú–ö, –°–µ–≤–µ—Ä—Å—Ç–∞–ª—å, –ú–ú–ö
- **–¢–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏** (LOW —Ä–∏—Å–∫) - –ú–¢–°, –ú–µ–≥–∞–§–æ–Ω, –†–æ—Å—Ç–µ–ª–µ–∫–æ–º
- **–†–æ–∑–Ω–∏—á–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è** (MEDIUM —Ä–∏—Å–∫) - –ú–∞–≥–Ω–∏—Ç, X5 Group, –õ–µ–Ω—Ç–∞
- **–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç** (MEDIUM —Ä–∏—Å–∫) - –ê—ç—Ä–æ—Ñ–ª–æ—Ç, –†–ñ–î
- **–•–∏–º–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç—å** (HIGH —Ä–∏—Å–∫) - –§–æ—Å–ê–≥—Ä–æ, –ê–∫—Ä–æ–Ω
- **–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ** (HIGH —Ä–∏—Å–∫) - –ü–ò–ö
- **–°–µ–ª—å—Å–∫–æ–µ —Ö–æ–∑—è–π—Å—Ç–≤–æ** (MEDIUM —Ä–∏—Å–∫) - –†—É—Å–∞–≥—Ä–æ
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏** (HIGH —Ä–∏—Å–∫) - –Ø–Ω–¥–µ–∫—Å, VK
- **–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏** (LOW —Ä–∏—Å–∫) - –ò–Ω—Ç–µ—Ä –†–ê–û
- **–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å** (MEDIUM —Ä–∏—Å–∫) - AFK –°–∏—Å—Ç–µ–º–∞
- **–ó–¥—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** (LOW —Ä–∏—Å–∫) - –§–∞—Ä–º—Å—Ç–∞–Ω–¥–∞—Ä—Ç
- **–¢–æ–≤–∞—Ä—ã –Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è** (LOW —Ä–∏—Å–∫) - –ß–µ—Ä–∫–∏–∑–æ–≤–æ

### 3. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∏—Å–∫–∞**
- **HIGH** - –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ (–±–∞–Ω–∫–∏, –º–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è, —Ö–∏–º–∏—è, —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- **MEDIUM** - –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ (–Ω–µ—Ñ—Ç—å/–≥–∞–∑, —Ä–æ–∑–Ω–∏—Ü–∞, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, —Å–µ–ª—å—Å–∫–æ–µ —Ö–æ–∑—è–π—Å—Ç–≤–æ, –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å)
- **LOW** - –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ (—Ç–µ–ª–µ–∫–æ–º, –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏, –∑–¥—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏–µ —Ç–æ–≤–∞—Ä—ã)

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã (–∏–∑ `application.yml`):
```yaml
position-management:
  max-sector-exposure-pct: 0.15      # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ–ª—è —Å–µ–∫—Ç–æ—Ä–∞: 15%
  max-positions-per-sector: 3        # –ú–∞–∫—Å–∏–º—É–º –ø–æ–∑–∏—Ü–∏–π –≤ —Å–µ–∫—Ç–æ—Ä–µ: 3
  max-total-positions: 15            # –ú–∞–∫—Å–∏–º—É–º –æ–±—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π: 15
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- **–ú–∞–∫—Å–∏–º—É–º –≤—ã—Å–æ–∫–æ—Ä–∏—Å–∫–æ–≤—ã—Ö —Å–µ–∫—Ç–æ—Ä–æ–≤**: 30% –æ—Ç –ø–æ—Ä—Ç—Ñ–µ–ª—è
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: –º–∏–Ω–∏–º—É–º 3 —Å–µ–∫—Ç–æ—Ä–∞
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏**: –±–æ–ª–µ–µ 25% –≤ –æ–¥–Ω–æ–º —Å–µ–∫—Ç–æ—Ä–µ

## üîß API Endpoints

### 1. **–ê–Ω–∞–ª–∏–∑ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏**
```
GET /api/sectors/diversification/{accountId}
```
**–û—Ç–≤–µ—Ç:**
```json
{
  "accountId": "2095844189",
  "totalValue": 100000.00,
  "sectorAnalysis": {
    "BANKS": {
      "totalValue": 15000.00,
      "positionsCount": 2,
      "percentage": 15.0
    }
  },
  "recommendations": [
    "–î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –≤ –Ω–æ–≤—ã–µ —Å–µ–∫—Ç–æ—Ä–∞ –¥–ª—è –ª—É—á—à–µ–π –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏"
  ]
}
```

### 2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–∫—É–ø–∫–∏**
```
POST /api/sectors/validate-purchase
```
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `accountId` - ID –∞–∫–∫–∞—É–Ω—Ç–∞
- `figi` - FIGI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- `positionValue` - –°—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏ –≤ —Ä—É–±–ª—è—Ö

**–û—Ç–≤–µ—Ç:**
```json
{
  "valid": false,
  "sector": "BANKS",
  "sectorName": "–ë–∞–Ω–∫–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã",
  "violations": [
    "–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Å–µ–∫—Ç–æ—Ä–∞ –ë–∞–Ω–∫–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã: 18.5% > 15.0% (–º–∞–∫—Å–∏–º—É–º)"
  ],
  "warnings": [
    "–ù–∏–∑–∫–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è: –º–µ–Ω–µ–µ 3 —Å–µ–∫—Ç–æ—Ä–æ–≤"
  ],
  "newSectorPercentage": 0.185,
  "totalPositions": 16,
  "positionsInSector": 4
}
```

### 3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ–∫—Ç–æ—Ä–æ–≤**
```
GET /api/sectors/stats/{accountId}
```
**–û—Ç–≤–µ—Ç:**
```json
{
  "accountId": "2095844189",
  "totalValue": 100000.00,
  "totalSectors": 5,
  "sectorDistribution": {
    "highRisk": {
      "count": 2,
      "exposure": 30000.00,
      "percentage": 30.0
    },
    "mediumRisk": {
      "count": 2,
      "exposure": 40000.00,
      "percentage": 40.0
    },
    "lowRisk": {
      "count": 1,
      "exposure": 30000.00,
      "percentage": 30.0
    }
  }
}
```

### 4. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–∫—Ç–æ—Ä–µ**
```
GET /api/sectors/info/{sector}
```
**–û—Ç–≤–µ—Ç:**
```json
{
  "sector": "BANKS",
  "sectorName": "–ë–∞–Ω–∫–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã",
  "riskCategory": "HIGH",
  "maxExposurePct": "15%",
  "maxPositions": 3
}
```

### 5. **–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ–∫—Ç–æ—Ä–æ–≤**
```
GET /api/sectors/list
```

## üñ•Ô∏è –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –°—Ç—Ä–∞–Ω–∏—Ü–∞: `/sector-management.html`

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:
1. **–û–±–∑–æ—Ä —Å–µ–∫—Ç–æ—Ä–æ–≤** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
2. **–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–∫—É–ø–æ–∫** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∫—É–ø–∫–∏
4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–º–∏—Ç–æ–≤

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:
- –í—ã–±–æ—Ä –∞–∫–∫–∞—É–Ω—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ —Ä–∏—Å–∫–∞–º
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–µ–∫—Ç–æ—Ä–æ–≤ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π —Ä–∏—Å–∫–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–∫—É–ø–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `PortfolioManagementService`:

```java
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º –ø–µ—Ä–µ–¥ –ø–æ–∫—É–ø–∫–æ–π
SectorValidationResult sectorValidation = 
    sectorManagementService.validateSectorDiversification(
        figi, 
        totalCost, 
        portfolioAnalysis.getTotalValue(),
        portfolioAnalysis.getPositions()
    );

if (!sectorValidation.isValid()) {
    log.warn("üö® –ù–ê–†–£–®–ï–ù–ò–ï –î–ò–í–ï–†–°–ò–§–ò–ö–ê–¶–ò–ò: {}", 
        String.join("; ", sectorValidation.getViolations()));
    return; // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–∫—É–ø–∫—É
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π:
```
üö® –ù–ê–†–£–®–ï–ù–ò–ï –î–ò–í–ï–†–°–ò–§–ò–ö–ê–¶–ò–ò: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Å–µ–∫—Ç–æ—Ä–∞ –ë–∞–Ω–∫–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã: 18.5% > 15.0% (–º–∞–∫—Å–∏–º—É–º) [–°–±–µ—Ä–±–∞–Ω–∫ (SBER) , accountId=2095844189]
```

## üìä –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

### 1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ —Å–µ–∫—Ç–æ—Ä–∞**
```java
BigDecimal newSectorPercentage = newSectorValue.divide(portfolioValue, 4, RoundingMode.HALF_UP);
if (newSectorPercentage.compareTo(maxSectorExposurePct) > 0) {
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–∫—É–ø–∫—É
}
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–∑–∏—Ü–∏–π –≤ —Å–µ–∫—Ç–æ—Ä–µ**
```java
int newPositionsInSector = currentSector.getPositionsCount() + 1;
if (newPositionsInSector > maxPositionsPerSector) {
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–∫—É–ø–∫—É
}
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–∑–∏—Ü–∏–π**
```java
int totalPositions = currentPositions.size() + 1;
if (totalPositions > maxTotalPositions) {
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–∫—É–ø–∫—É
}
```

### 4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Å–æ–∫–æ—Ä–∏—Å–∫–æ–≤—ã—Ö —Å–µ–∫—Ç–æ—Ä–æ–≤**
```java
if ("HIGH".equals(sectorRisk)) {
    BigDecimal newHighRiskExposure = highRiskExposure.add(positionValue);
    BigDecimal maxHighRiskExposure = portfolioValue.multiply(new BigDecimal("0.30"));
    
    if (newHighRiskExposure.compareTo(maxHighRiskExposure) > 0) {
        // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–∫—É–ø–∫—É
    }
}
```

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–π

### –ü—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:
1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∑–∞–ø–∏—Å—å –≤ `BotLogService` —Å —É—Ä–æ–≤–Ω–µ–º `WARNING`
2. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞** - –ø–æ–∫—É–ø–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏

### –ü—Ä–∏–º–µ—Ä—ã –Ω–∞—Ä—É—à–µ–Ω–∏–π:
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Å–µ–∫—Ç–æ—Ä–∞ (15% > 15%)
- –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π –≤ —Å–µ–∫—Ç–æ—Ä–µ (4 > 3)
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –ª–∏–º–∏—Ç–∞ –ø–æ–∑–∏—Ü–∏–π (16 > 15)
- –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –≤ –≤—ã—Å–æ–∫–æ—Ä–∏—Å–∫–æ–≤—ã—Ö —Å–µ–∫—Ç–æ—Ä–∞—Ö (35% > 30%)

## üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. **–ù–∏–∑–∫–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** - –º–µ–Ω–µ–µ 3 —Å–µ–∫—Ç–æ—Ä–æ–≤
2. **–í—ã—Å–æ–∫–∞—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è** - –±–æ–ª–µ–µ 40% –≤ –≤—ã—Å–æ–∫–æ—Ä–∏—Å–∫–æ–≤—ã—Ö —Å–µ–∫—Ç–æ—Ä–∞—Ö
3. **–ü–µ—Ä–µ–≤–µ—Å –≤ —Å–µ–∫—Ç–æ—Ä–µ** - –±–æ–ª–µ–µ 25% –≤ –æ–¥–Ω–æ–º —Å–µ–∫—Ç–æ—Ä–µ

### –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:
```
‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏: –ù–∏–∑–∫–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è: –º–µ–Ω–µ–µ 3 —Å–µ–∫—Ç–æ—Ä–æ–≤
‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏: –°–Ω–∏–∑–∏—Ç—å –¥–æ–ª—é –≤—ã—Å–æ–∫–æ—Ä–∏—Å–∫–æ–≤—ã—Ö —Å–µ–∫—Ç–æ—Ä–æ–≤ (—Å–µ–π—á–∞—Å > 40%)
‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏: –°–Ω–∏–∑–∏—Ç—å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –≤ —Å–µ–∫—Ç–æ—Ä–µ –ë–∞–Ω–∫–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã (—Å–µ–π—á–∞—Å 25.5%)
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `application.yml`:
```yaml
position-management:
  max-sector-exposure-pct: 0.15      # 15% –Ω–∞ —Å–µ–∫—Ç–æ—Ä
  max-positions-per-sector: 3        # 3 –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ —Å–µ–∫—Ç–æ—Ä
  max-total-positions: 15            # 15 –æ–±—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π
  position-sizing:
    first-buy-pct: 0.005             # 0.5% –æ—Ç buyingPower
    add-buy-pct: 0.003               # 0.3% –æ—Ç buyingPower
    min-position-value: 1000         # –ú–∏–Ω–∏–º—É–º 1000 —Ä—É–±
```

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- –í—Å–µ –ª–∏–º–∏—Ç—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–æ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–π
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Ä—Ç—Ñ–µ–ª—è

### 2. **–†–æ—Å—Å–∏–π—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞**
- –£—á–µ—Ç –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ —Ä—ã–Ω–∫–∞
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ–∫—Ç–æ—Ä–æ–≤
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –¥–ª—è –Ω–µ–∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤

### 3. **–ì–∏–±–∫–æ—Å—Ç—å**
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ª–∏–º–∏—Ç—ã
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ä–∏—Å–∫–∞–º
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### 4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ —Ä–∏—Å–∫–æ–≤
- –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–∫–æ—Å–æ–≤ –ø–æ—Ä—Ç—Ñ–µ–ª—è

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—É–ø–∫–∏ –°–±–µ—Ä–±–∞–Ω–∫–∞**
```
FIGI: BBG004730NQ9
–°—É–º–º–∞: 50,000 —Ä—É–±
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ë–õ–û–ö–ò–†–û–í–ê–ù–û
–ü—Ä–∏—á–∏–Ω–∞: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Å–µ–∫—Ç–æ—Ä–∞ –ë–∞–Ω–∫–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã: 18.5% > 15%
```

### 2. **–£—Å–ø–µ—à–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ –ì–∞–∑–ø—Ä–æ–º–∞**
```
FIGI: BBG0047315Y7
–°—É–º–º–∞: 30,000 —Ä—É–±
–†–µ–∑—É–ª—å—Ç–∞—Ç: –†–ê–ó–†–ï–®–ï–ù–û
–°–µ–∫—Ç–æ—Ä: –ù–µ—Ñ—Ç—å –∏ –≥–∞–∑ (MEDIUM —Ä–∏—Å–∫)
–î–æ–ª—è –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏: 12.3%
```

### 3. **–ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ñ–µ–ª—è**
```
–í—Å–µ–≥–æ —Å–µ–∫—Ç–æ—Ä–æ–≤: 5
–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫: 2 —Å–µ–∫—Ç–æ—Ä–∞ (30%)
–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫: 2 —Å–µ–∫—Ç–æ—Ä–∞ (40%)
–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫: 1 —Å–µ–∫—Ç–æ—Ä (30%)
–°—Ç–∞—Ç—É—Å: –•–æ—Ä–æ—à–æ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
```

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞):
1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ FIGI** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
2. **–£–ª—É—á—à–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤** - –±–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ–∫—Ç–æ—Ä–æ–≤
3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏** - –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –º–µ–∂–¥—É —Å–µ–∫—Ç–æ—Ä–∞–º–∏

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤):
1. **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ª–∏–º–∏—Ç–æ–≤
2. **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** - —Ç—Ä–µ–Ω–¥—ã –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏** - –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (6+ –º–µ—Å—è—Ü–µ–≤):
1. **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** - —É—á–µ—Ç –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤
2. **ESG-—Ñ–∏–ª—å—Ç—Ä—ã** - —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ, —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞** - –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ `application.yml`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞–ø–ø–∏–Ω–≥ FIGI –¥–ª—è –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ API `/api/sectors/stats/{accountId}` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ–∫—Ç–æ—Ä–æ–≤
curl http://localhost:8081/api/sectors/stats/2095844189

# –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–∫—É–ø–∫–∏
curl -X POST "http://localhost:8081/api/sectors/validate-purchase" \
  -d "accountId=2095844189&figi=BBG004730NQ9&positionValue=50000"

# –ê–Ω–∞–ª–∏–∑ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
curl http://localhost:8081/api/sectors/diversification/2095844189
```

---

**–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞–º–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–æ—Ä–≥–æ–≤–ª—é —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è! üöÄ**
