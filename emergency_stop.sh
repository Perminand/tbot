#!/bin/bash
# üö® –≠–ö–°–¢–†–ï–ù–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –¢–û–†–ì–û–í–û–ì–û –ë–û–¢–ê

echo "üö® –≠–ö–°–¢–†–ï–ù–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –¢–û–†–ì–û–í–û–ì–û –ë–û–¢–ê"
echo "=================================="

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Java –ø—Ä–æ—Ü–µ—Å—Å–∞
echo "–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Java –ø—Ä–æ—Ü–µ—Å—Å—ã..."
pkill -f "java.*Main" || echo "Java –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –Ω–∞–π–¥–µ–Ω"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
echo "–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã..."
docker-compose down 2>/dev/null || echo "Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã"

# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
echo "–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏..."
touch /workspace/TRADING_STOPPED.lock
echo "$(date): –¢–æ—Ä–≥–æ–≤–ª—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ" >> /workspace/trading_stop.log

echo "‚úÖ –¢–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
echo "–î–ª—è –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª /workspace/TRADING_STOPPED.lock"